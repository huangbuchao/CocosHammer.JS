{"version":3,"sources":["Test.js"],"names":["PREVSET_EVENTS","HANDLE_MAP","LABEL_TEXT_MAP","cc","Class","extends","Component","properties","onLoad","initPosition","node","getPosition","hammer","Hammer","refreshRecognizer","convertRecognizer","e","data","updateLabel","parseInt","value","prevEventSet","off","on","eventDelegate","bind","console","log","arguments","type","str","parent","getChildByName","getComponent","Label","string","resetNode","setPosition","setScale","onPan","eventType","startPoint","x","deltaX","y","deltaY","onTap","onSwipe","onPress"],"mappings":"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","file":"Test.js","sourceRoot":"../../../../assets/Script","sourcesContent":["import Hammer from \"./CocosHammer\";\n\nconst PREVSET_EVENTS = [\n  \"panstart panmove panend pancancel\",\n  \"tap\",\n  \"swipeleft swiperight\",\n  \"press pressup\"\n];\nconst HANDLE_MAP = [\"onPan\", \"onTap\", \"onSwipe\", \"onPress\"];\nconst LABEL_TEXT_MAP = [\"pan test\", \"tap test\", \"swipe test\", \"press test\"];\n\ncc.Class({\n  extends: cc.Component,\n\n  properties: {},\n\n  onLoad() {\n    this.initPosition = this.node.getPosition();\n    this.hammer = new Hammer(this.node);\n    this.refreshRecognizer(0);\n  },\n\n  /**\n   * on button click, convert corresponding recognizer.\n   * @param {cc.Event} e\n   * @param {customData} data\n   */\n  convertRecognizer(e, data) {\n    this.updateLabel(LABEL_TEXT_MAP[data]);\n    this.refreshRecognizer(parseInt(data));\n  },\n\n  /**\n   * remove prevent event handlers, add required event listener.\n   * @param {number} value\n   */\n  refreshRecognizer(value) {\n    if (this.prevEventSet) {\n      this.hammer.off(this.prevEventSet);\n    }\n    this.prevEventSet = PREVSET_EVENTS[parseInt(value)];\n    this.hammer.on(this.prevEventSet, this.eventDelegate.bind(this, value));\n  },\n\n  /**\n   * delegate different events, invoke corresponding handler.\n   * @param {wrapped event target} e\n   */\n  eventDelegate() {\n    console.log(\"listened: \", arguments[1].type);\n    this.updateLabel(arguments[1].type + \" gesture detected.\");\n    this[HANDLE_MAP[arguments[0]]](arguments[1]);\n  },\n\n  /**\n   * update label's text\n   * @param {String || undefined} str\n   */\n  updateLabel(str) {\n    this.node.parent\n      .getChildByName(\"manager\")\n      .getChildByName(\"label\")\n      .getComponent(cc.Label).string = str || \"\";\n  },\n\n  resetNode() {\n    this.node.setPosition(this.initPosition);\n    this.node.setScale(1, 1);\n  },\n\n  /**\n   * handle selfType event.\n   * @param {wrapped event target} e\n   */\n  onPan(e) {\n    let eventType = e.type;\n    if (eventType === \"panstart\") {\n      this.startPoint = this.node.getPosition();\n    }\n    this.node.setPosition(\n      this.startPoint.x + e.deltaX,\n      this.startPoint.y + e.deltaY\n    );\n    if (eventType === \"panend\" || eventType === \"pancancel\") {\n      this.resetNode();\n    }\n  },\n\n  onTap() {},\n\n  onSwipe(e) {\n    let eventType = e.type;\n    console.log(e);\n  },\n\n  onPress(e) {\n    let eventType = e.type;\n    if (eventType === \"press\") {\n      this.node.setScale(0.8, 0.8);\n    }\n    if (eventType === \"pressup\") {\n      this.node.setScale(1, 1);\n    }\n  }\n});\n"]}